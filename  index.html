<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ููุชุจุฉ ุงูุนูุณุงุฆู ุงููุงููููุฉ ุงูุฑูููุฉ</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1f1a14" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<link rel="stylesheet" href="css/style.css"> 
</head>
<body>
<div id="message-container"></div> 

<div class="app" id="app">
  <header class="topbar">
    <div class="brand">
      <div class="logo">๐</div>
      <div>
        <div class="title">ููุชุจุฉ ุงูุนูุณุงุฆู ุงููุงููููุฉ ุงูุฑูููุฉ</div>
        <div class="small">ูุณุฎุฉ ูุญููุฉ ูุงุจูุฉ ููุชุซุจูุช (PWA) โ ุชุนูู ุจุฏูู ุฅูุชุฑูุช</div>
      </div>
    </div>
    <div class="actions">
      <button id="btn-install" class="icon-btn install-btn" style="display:none">โฌ๏ธ ุชุซุจูุช</button>
      <button id="btn-admin" class="icon-btn">โ๏ธ ุงูุถุจุท</button>
    </div>
  </header>

  <nav class="icon-strip">
    <div class="strip-inner" id="top-icons">
      </div>
  </nav>

  <div class="search-row">
    <input type="text" id="search" class="search-input" placeholder="ุงูุชุจ ููุจุญุซ ูู ุงููุตูุต ูุงูุนูุงููู...">
    <button id="search-btn" class="search-icon">๐</button>
  </div>

  <div class="layout">
    <div class="left-panel">
      <div class="panel-title">ุงูููุฑุณ ูุงููุญุชููุงุช</div>
      <div class="index-window" id="public-index">
        </div>
    </div>

    <div class="right-panel">
      <div class="viewer-head">
        <div class="row">
          <div class="viewer-title" id="item-title"></div>
          <div class="small" id="item-subtitle"></div>
        </div>
        <div class="row">
          <button id="btn-copy-selected" class="btn neutral">๐ ูุณุฎ</button>
          <button id="btn-print-selected" class="btn neutral">๐จ๏ธ ุทุจุงุนุฉ</button>
          <button id="btn-share-selected" class="btn neutral">๐ค ูุดุงุฑูุฉ</button>
        </div>
      </div>
      <div class="viewer" id="viewer-content">
        <p style="text-align:center;color:#5d5d5d;padding-top:20px;">
          ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ูุณู ูู ุงููุงุฆูุฉ ุงููุณุฑู ุฃู ุงุณุชุฎุฏู ุฎุงุตูุฉ ุงูุจุญุซ.
        </p>
      </div>
      
      <div id="attachments-section" style="margin-top: 15px; display:none;">
          <div class="panel-title" style="margin-bottom: 5px;">ูุฑููุงุช ุงููููุฐุฌ</div>
          <div id="attachments-list" class="row" style="flex-wrap: wrap;">
              </div>
      </div>

      <div class="contact-form-card" style="margin-top:12px">
        <div class="panel-title">ูููุฐุฌ ุชูุงุตู ูุฅุฑุณุงู ุงุณุชูุณุงุฑ/ูุณุชูุฏุงุช (ุณุฑู ููุญูู)</div>
        <input type="text" id="visitor-name" class="input" placeholder="ุงูุงุณู (ุงุฎุชูุงุฑู)">
        <textarea id="visitor-message" class="input" rows="3" placeholder="ุงูุฑุณุงูุฉ"></textarea>
        <input type="file" id="visitor-files" style="margin-top: 8px;" multiple>
        <button id="submit-upload" class="btn primary" style="width:100%;margin-top:10px">ุฅุฑุณุงู ูุญููุงู</button>
        <div class="small" style="text-align:center;margin-top:8px">ููุงุญุธุฉ: ูุชู ุชุฎุฒูู ุงูุฑุณุงุฆู ูุญููุงู ุนูู ุฌูุงุฒู ููุท.</div>
      </div>
    </div>
  </div>
  
  <footer class="footer">
    ููุชุจุฉ ุงูุนูุณุงุฆู ุงููุงููููุฉ ุงูุฑูููุฉ | PWA
  </footer>
</div>


<div id="password-modal" class="modal">
    <div class="modal-content">
        <h2 style="margin-top: 0; color:var(--accent)">ูููุฉ ูุฑูุฑ ุงููุณุคูู</h2>
        <div id="password-info"></div> 
        <input type="password" id="admin-password-input" class="input" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ">
        <div class="row" style="margin-top: 15px; justify-content: flex-end;">
            <button id="submit-password" class="btn primary">ุชุฃููุฏ</button>
            <button id="close-password-modal" class="btn neutral">ุฅูุบุงุก</button>
        </div>
    </div>
</div>

<div id="admin-modal" class="modal">
  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center"><h3>โ๏ธ ููุญุฉ ุงูุฅุฏุงุฑุฉ</h3><button id="admin-close" class="icon-btn">โ</button></div>
    
    <h4>ููุฑุณ ุงูููุชุจุฉ</h4>
    <div class="admin-index-list" id="admin-index-list">
        </div>
    
    <div class="row" style="margin-top:12px;gap:8px">
        <input type="text" id="new-type-title" class="input" placeholder="ุงุณู ุงูุชุตููู ุงูุฌุฏูุฏ (ูุซู: ูุถุงุกุ ุนููุฏ)">
        <input type="text" id="new-type-icon" class="input" style="width:60px" placeholder="ุฃููููุฉ">
        <button id="btn-add-type" class="btn primary">ุฅุถุงูุฉ ุชุตููู</button>
    </div>

    <hr style="border:0;border-top:1px solid var(--line);margin:12px 0">
    
    <div class="layout" style="gap:20px;margin-top:0">
        <div style="flex:1">
            <h4>ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช</h4>
            <div class="row" style="flex-direction:column;gap:8px;">
                <button id="admin-export-meta" class="btn neutral">ุชุตุฏูุฑ ุงูููุฑุณ (JSON)</button>
                <button id="admin-import-meta" class="btn neutral">ุงุณุชูุฑุงุฏ ุงูููุฑุณ (JSON)</button>
                <button id="admin-export-files" class="btn primary">ุชุตุฏูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงููุณุฎ ุงูุงุญุชูุงุทู)</button>
            </div>
            <div style="height:12px"></div>

            <h4>ุงูุญูุงูุฉ</h4>
            <div class="row" style="flex-direction:column;gap:8px;">
                <button id="btn-set-password" class="btn neutral">ุชุนููู/ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</button>
                <button id="btn-reset-password" class="btn neutral">ุฅุนุงุฏุฉ ุถุจุท ูููุฉ ุงููุฑูุฑ</button>
            </div>
        </div>

        <div style="flex:1">
            <h4>ุงููุฑุณูุงุช (ูู ูููุฐุฌ ุงูุชูุงุตู)</h4>
            <div class="row" style="flex-direction:column;gap:8px;">
                <button id="admin-view-uploads" class="btn neutral">ุนุฑุถ ุงููุฑุณูุงุช</button>
                <button id="admin-clear-uploads" class="btn neutral">ุญุฐู ูู ุงููุฑุณูุงุช</button>
            </div>
        </div>
    </div>
    
    <div class="card" style="margin-top: 20px; background:var(--bg); border:1px solid var(--accent); padding:12px;">
        <h3 class="panel-title" style="color:var(--accent);margin-top:0;">๐ ุฅุฏุงุฑุฉ ูุชุญุฑูุฑ ุงููุญุชูู</h3>
        <div style="margin-bottom: 10px; display:flex; gap:10px;">
            <button id="btn-show-index-manager" class="btn primary" style="flex-grow:1;">ูุชุญ ููุญุฉ ุชุญุฑูุฑ ุงูููุฑุณ</button>
        </div>
        <div id="content-manager-area" style="max-height: 400px; overflow-y: auto; display:none; border-top: 1px solid var(--line); padding-top: 10px;">
            <div id="editable-index"></div>
        </div>
    </div>
    </div>
</div>

<div id="editor-modal" class="modal">
    <div class="card" style="max-width: 900px; padding: 0;">
        <div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:var(--bg);border-radius:10px 10px 0 0;">
            <h3 style="margin:0;color:var(--accent)">ุชุนุฏูู ุงููุญุชูู</h3>
            <button id="editor-close" class="icon-btn">โ</button>
        </div>
        <div style="padding:12px">
            <input type="text" id="item-editor-title" class="input" placeholder="ุนููุงู ุงููุงุฏุฉ/ุงููุซุงู">
            <div id="item-editor" style="margin-top:8px;min-height:300px;border:1px solid var(--line);border-radius:8px;padding:10px;background:#0b0a09" contenteditable="true"></div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
                <div class="row">
                    <button id="btn-attach-files" class="btn neutral">๐ ุฅุฑูุงู ูููุงุช</button>
                    <button id="btn-view-attachments" class="btn neutral">๐ ุนุฑุถ ุงููุฑููุงุช</button>
                    <button id="btn-delete-item" class="btn neutral" style="color:var(--error);border-color:var(--error)">๐๏ธ ุญุฐู</button>
                </div>
                <button id="editor-save" class="btn primary">๐พ ุญูุธ</button>
            </div>
            <div style="height:12px"></div>
        </div>
    </div>
</div>

<div id="view-attachments-modal" class="modal">
    <div class="card" style="max-width:500px">
        <div style="display:flex;justify-content:space-between;align-items:center"><h3>๐ ุงููุฑููุงุช</h3><button id="view-attachments-close" class="icon-btn">โ</button></div>
        <div id="attachments-list-edit" style="margin-top:8px"></div>
        <div class="small" style="margin-top:10px;color:var(--error);text-align:right">** ููุงุญุธุฉ: ูุง ูููู ุญุฐู ุงููุฑููุงุช ุฅูุง ุนู ุทุฑูู ุงุณุชูุฑุงุฏ ูุชุตุฏูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงููุงูู.</div>
    </div>
</div>

<div id="uploads-modal" class="modal"><div class="card">
  <div style="display:flex;justify-content:space-between;align-items:center"><h3>๐ฅ ุงููุฑุณูุงุช ุงููุงุฑุฏุฉ</h3><button id="uploads-close" class="icon-btn">โ</button></div>
  <div id="uploads-list" style="margin-top:8px"></div>
</div></div>

<script src="js/app.js"></script>
<script>
// ุชุณุฌูู service worker (ููุชุดุบูู ุจุฏูู ุฅูุชุฑูุช)
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('service-worker.js').then(reg => {
      console.log('Service Worker registered: ', reg);
    }, err => {
      console.log('Service Worker registration failed: ', err);
    });
  });
}
</script>

</body>
</html>
